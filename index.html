<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discover a New Poet</title>
    <style>
        body {
            font-family: "Garamond", serif;
            background-color: #f9f4e3;
            color: #2c2c2c;
            max-width: 1000px;
            margin: 2rem auto;
            padding: 2rem;
            border-radius: 10px;
            background: #ffffff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        #tags-container {
            margin-bottom: 2rem;
        }
        #recommendation {
            margin-top: 2rem;
            padding: 1rem;
            border: 1px solid #d1cfc7;
            border-radius: 8px;
            background: #f5f3e7;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .tag-checkbox {
            margin: 0.5rem;
        }
    </style>
</head>
<body>
    <h1>Discover a New Poet</h1>
    <div id="tags-container">
        <h2>Select Your Interests</h2>
        <div id="tags"></div>
    </div>
    <div id="recommendation">
        <h2>Recommended Books</h2>
        <div id="recommended-books"></div>
    </div>

    <script>
        // Load JSON data
        const poetryCollections = "poetry_collections.json";
        let allBooks = [];
        let selectedTags = [];
        const allTags = new Set();

        fetch(poetryCollections)
            .then(response => response.json())
            .then(data => {
                allBooks = data;
                data.forEach(book => {
                    book.tags.forEach(tag => allTags.add(tag));
                });
                displayTags();
            })
            .catch(error => console.error('Error loading JSON:', error));

        function displayTags() {
            const tagsContainer = document.getElementById('tags');
            tagsContainer.innerHTML = ""; // Clear previous tags

            allTags.forEach(tag => {
                const tagElement = document.createElement('div');
                tagElement.classList.add('tag-checkbox');
                tagElement.innerHTML = `
                    <input type="checkbox" id="tag-${tag}" value="${tag}" onchange="handleTagSelection(this)">
                    <label for="tag-${tag}">${tag}</label>
                `;
                tagsContainer.appendChild(tagElement);
            });
        }

        function handleTagSelection(checkbox) {
            const tag = checkbox.value;
            if (checkbox.checked) {
                selectedTags.push(tag);
            } else {
                selectedTags = selectedTags.filter(t => t !== tag);
            }
            displayRecommendations();
        }

        function displayRecommendations() {
            const recommendedBooksContainer = document.getElementById('recommended-books');
            recommendedBooksContainer.innerHTML = ""; // Clear previous recommendations

            const recommendedBooks = allBooks.filter(book =>
                book.tags.some(tag => selectedTags.includes(tag))
            );

            if (recommendedBooks.length > 0) {
                recommendedBooks.forEach(book => {
                    const bookElement = document.createElement('div');
                    bookElement.classList.add('book');
                    bookElement.innerHTML = `
                        <p><strong>Title:</strong> ${book.title}</p>
                        <p><strong>Author:</strong> ${book.author}</p>
                        <p><strong>Year:</strong> ${book.year}</p>
                    `;
                    recommendedBooksContainer.appendChild(bookElement);
                });
            } else {
                recommendedBooksContainer.innerHTML = "<p>No books match your current selection.</p>";
            }
        }
    </script>
</body>
</html>
